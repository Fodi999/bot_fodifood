# üß† –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –ø–∞–º—è—Ç–∏ –±–æ—Ç–∞

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –ø–∞–º—è—Ç—å FodiFood Bot

### 1Ô∏è‚É£ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π

–ë–æ—Ç **—Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –∑–∞–ø–æ–º–∏–Ω–∞–µ—Ç** –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏–∑ –¥–∏–∞–ª–æ–≥–∞:

#### –ü—Ä–∏–º–µ—Ä 1: –û—Å—Ç—Ä—ã–µ –±–ª—é–¥–∞ üå∂Ô∏è
```
üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–•–æ—á—É —á—Ç–æ-—Ç–æ –æ—Å—Ç—Ä–æ–µ"
ü§ñ –ë–æ—Ç: [—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç preference: spicy = true]
      "üåü –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏..."

üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–ü–æ—Å–æ–≤–µ—Ç—É–π —á—Ç–æ-–Ω–∏–±—É–¥—å"
ü§ñ –ë–æ—Ç: [–≤—Å–ø–æ–º–∏–Ω–∞–µ—Ç spicy = true]
      "üå∂Ô∏è –î–ª—è –ª—é–±–∏—Ç–µ–ª–µ–π –æ—Å—Ç—Ä–æ–≥–æ:
       ‚Ä¢ –ö—Ä–µ–≤–µ—Ç–∫–∏ –≤ –æ—Å—Ç—Ä–æ–º —á–∏–ª–∏-—Å–æ—É—Å–µ (üå∂Ô∏èüå∂Ô∏èüå∂Ô∏è)
       ‚Ä¢ –û—Å—Ç—Ä–∞—è –ø–∞—ç–ª—å—è —Å –º–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç–∞–º–∏ (üå∂Ô∏èüå∂Ô∏è)
       ‚Ä¢ –¢–æ–º-—è–º —ç–∫—Å—Ç—Ä–∞-–æ—Å—Ç—Ä—ã–π (üå∂Ô∏èüå∂Ô∏èüå∂Ô∏èüå∂Ô∏è)"
```

#### –ü—Ä–∏–º–µ—Ä 2: –ó–¥–æ—Ä–æ–≤–æ–µ –ø–∏—Ç–∞–Ω–∏–µ ü•ó
```
üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–Ø –Ω–∞ –¥–∏–µ—Ç–µ, —á—Ç–æ-—Ç–æ –ª–µ–≥–∫–æ–µ"
ü§ñ –ë–æ—Ç: [—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç preference: healthy = true]

üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–ß—Ç–æ –ø–æ—Å–æ–≤–µ—Ç—É–µ—à—å?"
ü§ñ –ë–æ—Ç: [–≤—Å–ø–æ–º–∏–Ω–∞–µ—Ç healthy = true]
      "ü•ó –î–ª—è –∑–¥–æ—Ä–æ–≤–æ–≥–æ –ø–∏—Ç–∞–Ω–∏—è (–ü–ü):
       ‚Ä¢ –õ–æ—Å–æ—Å—å –Ω–∞ –ø–∞—Ä—É —Å –±—Ä–æ–∫–∫–æ–ª–∏ (350 –∫–∫–∞–ª)
       ‚Ä¢ –°–∞–ª–∞—Ç —Å –∫—Ä–µ–≤–µ—Ç–∫–∞–º–∏ –∏ –∞–≤–æ–∫–∞–¥–æ (280 –∫–∫–∞–ª)
       ‚Ä¢ –¢—É–Ω–µ—Ü –Ω–∞ –≥—Ä–∏–ª–µ —Å –∫–∏–Ω–æ–∞ (420 –∫–∫–∞–ª)"
```

#### –ü—Ä–∏–º–µ—Ä 3: –õ—é–±–∏–º—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã ü¶ê
```
üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–û–±–æ–∂–∞—é –∫—Ä–µ–≤–µ—Ç–∫–∏!"
ü§ñ –ë–æ—Ç: [—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç preference: favorite = shrimp]
      "ü¶ê –û—Ç–ª–∏—á–Ω–æ! –£ –Ω–∞—Å –æ—Ç–ª–∏—á–Ω—ã–µ –±–ª—é–¥–∞ —Å –∫—Ä–µ–≤–µ—Ç–∫–∞–º–∏!"

üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–ß—Ç–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å?"
ü§ñ –ë–æ—Ç: [–≤—Å–ø–æ–º–∏–Ω–∞–µ—Ç favorite = shrimp]
      "ü¶ê –î–ª—è –ª—é–±–∏—Ç–µ–ª–µ–π –∫—Ä–µ–≤–µ—Ç–æ–∫:
       ‚Ä¢ –ö–æ—Ä–æ–ª–µ–≤—Å–∫–∏–µ –∫—Ä–µ–≤–µ—Ç–∫–∏ –≥—Ä–∏–ª—å
       ‚Ä¢ –ö—Ä–µ–≤–µ—Ç–∫–∏ –≤ —á–∏–ª–∏-—Å–æ—É—Å–µ
       ‚Ä¢ –ö—Ä–µ–≤–µ—Ç–æ—á–Ω—ã–π –ø–∏—Ä (1–∫–≥ + —Å–æ—É—Å—ã)"
```

---

## 2Ô∏è‚É£ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ç–∏–ø—ã –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π

| –ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ | Preference | –¢–∏–ø —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ |
|----------------|-----------|------------------|
| "–æ—Å—Ç—Ä–æ–µ", "—á–∏–ª–∏", "spicy" | `spicy = true` | üå∂Ô∏è –û—Å—Ç—Ä—ã–µ –±–ª—é–¥–∞ |
| "–¥–∏–µ—Ç–∞", "–ø–ø", "–ª–µ–≥–∫–æ–µ" | `healthy = true` | ü•ó –ü–ü –∏ –Ω–∏–∑–∫–æ–∫–∞–ª–æ—Ä–∏–π–Ω–æ–µ |
| "–≤–µ–≥–µ—Ç–∞—Ä–∏–∞–Ω", "–±–µ–∑ –º—è—Å–∞" | `vegetarian = true` | üå± –í–µ–≥–µ—Ç–∞—Ä–∏–∞–Ω—Å–∫–∏–µ –±–ª—é–¥–∞ |
| "–∫—Ä–µ–≤–µ—Ç–∫–∏", "shrimp" | `favorite = shrimp` | ü¶ê –ë–ª—é–¥–∞ —Å –∫—Ä–µ–≤–µ—Ç–∫–∞–º–∏ |
| "–ª–æ—Å–æ—Å—å", "salmon" | `favorite = salmon` | üêü –ë–ª—é–¥–∞ —Å –ª–æ—Å–æ—Å–µ–º |
| "–∫–æ–º–ø–∞–Ω–∏—è", "–ø—Ä–∞–∑–¥–Ω–∏–∫" | `occasion = party` | üéâ –ë–æ–ª—å—à–∏–µ –ø–æ—Ä—Ü–∏–∏/—Å–µ—Ç—ã |

---

## 3Ô∏è‚É£ –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –ø–∞–º—è—Ç—å —Ä–∞–∑–≥–æ–≤–æ—Ä–∞

### –ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
–ë–æ—Ç –ø–æ–º–Ω–∏—Ç **–ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 —Å–æ–æ–±—â–µ–Ω–∏–π** –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

```rust
UserContext {
    message_history: ["–ü—Ä–∏–≤–µ—Ç", "–•–æ—á—É –æ—Å—Ç—Ä–æ–µ", "–ü–æ–∫–∞–∂–∏ –º–µ–Ω—é", ...],
    message_count: 3,
    last_intent: Some("ViewMenu"),
    preferences: {
        "spicy": "true"
    }
}
```

### –ü–æ—Å–ª–µ–¥–Ω–µ–µ –Ω–∞–º–µ—Ä–µ–Ω–∏–µ
–ü–æ–∑–≤–æ–ª—è–µ—Ç –≤–µ—Å—Ç–∏ —Å–≤—è–∑–Ω—ã–π –¥–∏–∞–ª–æ–≥:

```
üë§ "–ì–¥–µ –º–æ–π –∑–∞–∫–∞–∑?"
ü§ñ [last_intent = OrderStatus]
   "–£–∫–∞–∂–∏—Ç–µ –Ω–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞"

üë§ "ORD-12345"
ü§ñ [–ø–æ–º–Ω–∏—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç OrderStatus]
   "üì¶ –ü—Ä–æ–≤–µ—Ä—è—é —Å—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞ ORD-12345..."
```

---

## 4Ô∏è‚É£ –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–π

### –ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
```
ü§ñ "üéâ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ FodiFood!

    üëã –ü—Ä–∏–≤–µ—Ç! –Ø –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –±–æ—Ç...
    
    üí° –Ø –∑–∞–ø–æ–º–Ω—é –≤–∞—à–∏ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –¥–ª—è 
       –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞!"
```

### –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–π –∫–ª–∏–µ–Ω—Ç
```
ü§ñ "üëã –°–Ω–æ–≤–∞ –∑–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ!
    
    –í–∏–∂—É, –≤—ã –ª—é–±–∏—Ç–µ –æ—Å—Ç—Ä—ã–µ –±–ª—é–¥–∞ üå∂Ô∏è
    –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –Ω–æ–≤–∏–Ω–∫—É: –¢–æ–º-—è–º —ç–∫—Å—Ç—Ä–∞-–æ—Å—Ç—Ä—ã–π!"
```

---

## 5Ô∏è‚É£ API –ø–∞–º—è—Ç–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã

```rust
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π
memory.extract_and_save_preferences(user_id, "–•–æ—á—É –æ—Å—Ç—Ä–æ–µ").await;
// ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç spicy = true

// –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
let context = memory.get_recommendation_context(user_id).await;
// ‚Üí Some("–æ—Å—Ç—Ä–æ–µ, –∫—Ä–µ–≤–µ—Ç–∫–∏")

// –°–≤–æ–¥–∫–∞ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
let summary = memory.get_user_summary(user_id).await;
// ‚Üí "–°–æ–æ–±—â–µ–Ω–∏–π: 5 | –ü—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è: spicy=true, favorite=shrimp | –ü–æ—Å–ª–µ–¥–Ω–µ–µ: Recommendation"

// –†—É—á–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è
memory.set_preference(user_id, "cuisine".to_string(), "asian".to_string()).await;

// –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–µ
let pref = memory.get_preference(user_id, "spicy").await;
// ‚Üí Some("true")
```

---

## 6Ô∏è‚É£ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–Ω—Å–æ–ª–∏

–ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –ø–∞–º—è—Ç—å—é –≤—ã–≤–æ–¥—è—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ –ª–æ–≥–∏:

```
2025-10-12T22:30:15 [INFO] üå∂Ô∏è –ó–∞–ø–æ–º–Ω–∏–ª: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å user_123 –ª—é–±–∏—Ç –æ—Å—Ç—Ä–æ–µ
2025-10-12T22:30:42 [INFO] ü¶ê –ó–∞–ø–æ–º–Ω–∏–ª: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å user_123 –ª—é–±–∏—Ç –∫—Ä–µ–≤–µ—Ç–∫–∏
2025-10-12T22:31:05 [INFO] üí° –†–µ–∫–æ–º–µ–Ω–¥—É—é —Å —É—á—ë—Ç–æ–º: –æ—Å—Ç—Ä–æ–µ, –∫—Ä–µ–≤–µ—Ç–∫–∏
```

---

## 7Ô∏è‚É£ Thread-Safe —Ö—Ä–∞–Ω–µ–Ω–∏–µ

–ü–∞–º—è—Ç—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **Arc<RwLock<HashMap>>** –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π —Ä–∞–±–æ—Ç—ã –≤ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–π —Å—Ä–µ–¥–µ:

```rust
pub struct BotMemory {
    contexts: Arc<RwLock<HashMap<String, UserContext>>>,
}
```

‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ –¥–ª—è concurrent WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π  
‚úÖ –ù–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –¥—Ä—É–≥–∏–µ –∑–∞–ø—Ä–æ—Å—ã  
‚úÖ –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏

---

## 8Ô∏è‚É£ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–µ—Ä–≤—ã–π –≤–∏–∑–∏—Ç + –∑–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ
```
üë§ "–ü—Ä–∏–≤–µ—Ç!"
ü§ñ "üéâ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ FodiFood!..."

üë§ "–Ø –ª—é–±–ª—é –æ—Å—Ç—Ä–æ–µ –∏ –∫—Ä–µ–≤–µ—Ç–∫–∏"
ü§ñ [—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç: spicy=true, favorite=shrimp]
   "–û—Ç–ª–∏—á–Ω–æ! –£ –Ω–∞—Å –º–Ω–æ–≥–æ –æ—Å—Ç—Ä—ã—Ö –±–ª—é–¥ —Å –∫—Ä–µ–≤–µ—Ç–∫–∞–º–∏!"

üë§ "–ß—Ç–æ –ø–æ—Å–æ–≤–µ—Ç—É–µ—à—å?"
ü§ñ [–≤—Å–ø–æ–º–∏–Ω–∞–µ—Ç –æ–±–∞ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è]
   "üå∂Ô∏èü¶ê –°–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è –≤–∞—Å:
    ‚Ä¢ –ö—Ä–µ–≤–µ—Ç–∫–∏ –≤ –æ—Å—Ç—Ä–æ–º —á–∏–ª–∏-—Å–æ—É—Å–µ
    ‚Ä¢ –û—Å—Ç—Ä–∞—è –ø–∞—ç–ª—å—è —Å –∫—Ä–µ–≤–µ—Ç–∫–∞–º–∏"
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ö–æ–º–ø–∞–Ω–∏—è –¥—Ä—É–∑–µ–π
```
üë§ "–£ –º–µ–Ω—è —Å–µ–≥–æ–¥–Ω—è –≥–æ—Å—Ç–∏, —á—Ç–æ –∑–∞–∫–∞–∑–∞—Ç—å?"
ü§ñ [—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç: occasion=party]
   "üéâ –î–ª—è –∫–æ–º–ø–∞–Ω–∏–∏ –∏ –ø—Ä–∞–∑–¥–Ω–∏–∫–∞:
    ‚Ä¢ –ë–æ–ª—å—à–∞—è –ø–∞—ç–ª—å—è (–Ω–∞ 4-6 —á–µ–ª–æ–≤–µ–∫)
    ‚Ä¢ –ê—Å—Å–æ—Ä—Ç–∏ –º–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç–æ–≤ –≥—Ä–∏–ª—å"

üë§ "–ê –µ—â—ë —á—Ç–æ-–Ω–∏–±—É–¥—å?"
ü§ñ [–ø–æ–º–Ω–∏—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–∞–∑–¥–Ω–∏–∫–∞]
   "üåä –†–µ–∫–æ–º–µ–Ω–¥—É—é –¥–æ–±–∞–≤–∏—Ç—å:
    ‚Ä¢ –°–µ—Ç '–û–∫–µ–∞–Ω—Å–∫–∏–π –ø–∏—Ä'
    ‚Ä¢ –ö—Ä–µ–≤–µ—Ç–æ—á–Ω—ã–π –ø–∏—Ä (1–∫–≥)"
```

---

## üéØ –ò—Ç–æ–≥–∏

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–π –ø–∞–º—è—Ç–∏:**

‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ** ‚Äî –Ω–µ –Ω—É–∂–Ω–æ —Å–ø—Ä–∞—à–∏–≤–∞—Ç—å —è–≤–Ω–æ  
‚úÖ **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è** ‚Äî –∫–∞–∂–¥—ã–π –ø–æ–ª—É—á–∞–µ—Ç —Å–≤–æ–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏  
‚úÖ **–ù–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π –¥–∏–∞–ª–æ–≥** ‚Äî –ø–æ–º–Ω–∏—Ç —Ç–µ–º—É —Ä–∞–∑–≥–æ–≤–æ—Ä–∞  
‚úÖ **–£–º–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏** ‚Äî –∫–æ–º–±–∏–Ω–∏—Ä—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π  
‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî –≤–∏–¥–Ω–æ, —á—Ç–æ –∑–∞–ø–æ–º–Ω–∏–ª –±–æ—Ç  
‚úÖ **Thread-safe** ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π  

**–ë–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π AI! üöÄ
