# Security Policy

## Поддерживаемые версии

| Version | Supported          |
| ------- | ------------------ |
| 0.1.x   | :white_check_mark: |

## Сообщение об уязвимостях

Если вы обнаружили уязвимость в безопасности, пожалуйста:

1. **НЕ** создавайте публичный issue
2. Отправьте email с описанием проблемы
3. Дайте нам разумное время на исправление (обычно 90 дней)

## Лучшие практики безопасности

### Секреты и ключи

- ✅ Используйте переменные окружения для всех секретов
- ✅ Не коммитьте `.env` файлы в репозиторий
- ✅ Регулярно ротируйте API ключи
- ✅ Используйте Shuttle Secrets для production

### JWT токены

- ✅ Используйте сильные секретные ключи (минимум 32 символа)
- ✅ Установите адекватное время истечения токенов
- ✅ Валидируйте токены на каждом запросе
- ✅ Используйте HTTPS/WSS в production

### WebSocket безопасность

- ✅ Требуйте аутентификацию перед обработкой сообщений
- ✅ Валидируйте все входящие данные
- ✅ Ограничьте размер сообщений
- ✅ Используйте rate limiting

### Зависимости

- ✅ Регулярно обновляйте зависимости: `cargo update`
- ✅ Проверяйте уязвимости: `cargo audit`
- ✅ Используйте проверенные crates с активной поддержкой

### Примеры небезопасного кода

❌ **НЕ ДЕЛАЙТЕ ТАК:**
```rust
// Хардкод секретов
let api_key = "sk-hardcoded-key";

// Отсутствие валидации
let user_input = msg.text;
execute_sql(&format!("SELECT * FROM users WHERE name = '{}'", user_input));

// Отсутствие rate limiting
loop {
    handle_request().await;
}
```

✅ **ДЕЛАЙТЕ ТАК:**
```rust
// Секреты из окружения
let api_key = env::var("OPENAI_API_KEY")?;

// Валидация и санитизация
let user_input = sanitize_input(&msg.text)?;
let query = sqlx::query("SELECT * FROM users WHERE name = $1")
    .bind(&user_input);

// Rate limiting
if !check_rate_limit(&user_id) {
    return Err("Rate limit exceeded");
}
```

## Известные ограничения

1. **WebSocket connections** - нет автоматического лимита на количество соединений
2. **Memory usage** - может расти при большом количестве активных соединений
3. **AI API** - нет встроенного фолбэка при недоступности OpenAI

## Аудит безопасности

Последний аудит: Не проводился

Рекомендуется провести профессиональный аудит перед использованием в production.
