# FodiFood Intelligent Bot ü¶êü§ñ

**v2.2** - Advanced AI Restaurant Bot with Backend Orchestration

–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –±–æ—Ç –Ω–∞ Rust –¥–ª—è —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞ FodiFood - —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–æ–Ω–Ω—ã–π —É–∑–µ–ª –º–µ–∂–¥—É –∫–ª–∏–µ–Ω—Ç–∞–º–∏, –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º–∏ –∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–æ–π —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è.

## üöÄ –ß—Ç–æ –Ω–æ–≤–æ–≥–æ –≤ v2.2

### ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ (90% –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏):

**Step 1: Rules Migration** ‚úÖ
- –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ –º–æ–¥—É–ª—å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É intent handlers
- 17 —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –Ω–∞–º–µ—Ä–µ–Ω–∏–π
- –£–ª—É—á—à–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –∏–Ω—Ç–µ–Ω—Ç–æ–≤

**Step 2: Metrics Dashboard** ‚úÖ
- Prometheus-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ –º–µ—Ç—Ä–∏–∫–∏
- –í–µ–±-–¥–∞—à–±–æ—Ä–¥ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ intent'–æ–≤ –∏ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞
- JSON/Prometheus —Ñ–æ—Ä–º–∞—Ç—ã —ç–∫—Å–ø–æ—Ä—Ç–∞

**Step 3: WebSocket Insight Layer** ‚úÖ
- Real-time —Å—Ç—Ä–∏–º–∏–Ω–≥ AI —Å–æ–±—ã—Ç–∏–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
- 9 —Ç–∏–ø–æ–≤ —Å–æ–±—ã—Ç–∏–π (–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è, entity extraction, –∏ —Ç.–¥.)
- WebSocket endpoint `/api/v1/insight` –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
- Broadcast —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤

**Step 4: Go Backend Orchestration** ‚úÖ
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º Go –ø—Ä–æ—Ü–µ—Å—Å–∞
- Health monitoring —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–º
- REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è backend'–æ–º
- Status tracking –∏ uptime –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

**Step 5: Business Intelligence Module** ‚úÖ **NEW!**
- **Go Backend Integration**: HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è –±–∏–∑–Ω–µ—Å-–¥–∞–Ω–Ω—ã—Ö
- **AI Business Analysis**: –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω—ã–π —Å–∫–æ—Ä–∏–Ω–≥ (0-100), —Ç—Ä–µ–Ω–¥—ã, ROI
- **3 —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏–Ω—Ç–µ–Ω—Ç–∞**:
  - `AnalyzeBusiness` - –ê–Ω–∞–ª–∏–∑ –º–µ—Ç—Ä–∏–∫ –±–∏–∑–Ω–µ—Å–∞
  - `CompareBusinesses` - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ 2+ –±–∏–∑–Ω–µ—Å–æ–≤
  - `BusinessInsights` - AI-—Å–æ–≤–µ—Ç—ã –ø–æ —É–ª—É—á—à–µ–Ω–∏—é
- **Performance**: 80-550ms response time
- **Full Integration**: Neon PostgreSQL ‚Üí Go API ‚Üí Rust Analysis

**Step 6: Admin AI Assistant** üî≤ (–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)
- AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
- –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ —á–∞—Ç

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    WebSocket + REST      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Next.js       ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ   Rust Bot v2.2      ‚îÇ
‚îÇ   Frontend      ‚îÇ     wss:// + https://     ‚îÇ   (Shuttle.rs)       ‚îÇ
‚îÇ   (Vercel)      ‚îÇ                            ‚îÇ                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                            ‚îÇ  üß† AI Engine        ‚îÇ
                                               ‚îÇ  üìä Metrics          ‚îÇ
                                               ‚îÇ  üì° Insight WS       ‚îÇ
                                               ‚îÇ  üéØ Orchestrator     ‚îÇ
                                               ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                                          ‚îÇ
                                                          ‚îÇ REST API
                                                          ‚îÇ Health Checks
                                                          ‚ñº
                                                 ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                                                 ‚îÇ   Go Backend     ‚îÇ
                                                 ‚îÇ   (Koyeb)        ‚îÇ
                                                 ‚îÇ   Business Logic ‚îÇ
                                                 ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### ü§ñ AI Engine (v2.2)
- **17 Intent Handlers**: –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
  - 14 –±–∞–∑–æ–≤—ã—Ö (–º–µ–Ω—é, –∑–∞–∫–∞–∑—ã, –∞–Ω–∞–ª–∏—Ç–∏–∫–∞, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏)
  - **3 –±–∏–∑–Ω–µ—Å-–∏–Ω—Ç–µ–Ω—Ç–∞** (–∞–Ω–∞–ª–∏–∑, —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ, —Å–æ–≤–µ—Ç—ã)
- **Cognitive Analysis**: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è, —ç–º–æ—Ü–∏–π, —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
- **Natural Language**: –ü–æ–Ω–∏–º–∞–Ω–∏–µ —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
- **Smart Routing**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
- **Memory System**: –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏–∏
- **Business Intelligence**: –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∏ AI-—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### üìä Metrics & Monitoring
- **Prometheus Metrics**: `/metrics` endpoint
- **Web Dashboard**: `/admin/metrics` - –≤–∏–∑—É–∞–ª—å–Ω—ã–π –¥–∞—à–±–æ—Ä–¥
- **Intent Tracking**: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è intent'–æ–≤
- **Response Times**: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **Success Rates**: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏

### üì° Real-time Insights
- **WebSocket Stream**: `/api/v1/insight` - —Å–æ–±—ã—Ç–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ AI
- **Event Types**: 9 —Ç–∏–ø–æ–≤ —Å–æ–±—ã—Ç–∏–π (classification, extraction, routing, etc.)
- **Client Management**: Broadcast –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
- **Debugging**: –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è AI pipeline –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

### üéØ Backend Orchestration
- **Process Control**: Start/Stop/Restart Go backend
- **Health Monitoring**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ health checks
- **Auto-restart**: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ —Å–±–æ—è—Ö
- **Status API**: `/api/v1/admin/backend/status`
- **PID Tracking**: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ—Ü–µ—Å—Å–∞ –∏ uptime

### üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- JWT-—Ç–æ–∫–µ–Ω—ã –æ—Ç Go backend
- –†–æ–ª–∏: Client, Admin, Manager, Courier, Cook
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏

### üí¨ WebSocket –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è
- –†–µ–∞–ª-—Ç–∞–π–º —á–∞—Ç —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏
- –ö–æ–º–∞–Ω–¥–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω–∞–º
- AI Insight streaming

### üì° Webhook —Å–∏—Å—Ç–µ–º–∞
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –æ—Ç Go backend
- –†–∞—Å—Å—ã–ª–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø–æ —Ä–æ–ª—è–º
- –°–æ–±—ã—Ç–∏—è: new_order, order_status_changed, low_inventory

### üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Go Backend
- `/api/auth/verify` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤
- `/api/products` - –º–µ–Ω—é
- `/api/orders` - –∑–∞–∫–∞–∑—ã
- `/api/ingredients` - —Å–∫–ª–∞–¥
- `/api/stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- **`/api/businesses`** - —Å–ø–∏—Å–æ–∫ –±–∏–∑–Ω–µ—Å–æ–≤ (NEW!)
- **`/api/metrics/:id`** - –º–µ—Ç—Ä–∏–∫–∏ –±–∏–∑–Ω–µ—Å–∞ (NEW!)

### üíº Business Intelligence API (NEW!)
- **Investment Scoring**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç –±–∞–ª–ª–∞ 0-100
- **Trend Analysis**: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–æ—Å—Ç–∞/—Å—Ç–∞–≥–Ω–∞—Ü–∏–∏/–ø–∞–¥–µ–Ω–∏—è
- **ROI Calculation**: –†–µ–Ω—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π
- **Multi-business Comparison**: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π
- **AI Recommendations**: –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–≤–µ—Ç—ã –ø–æ —É–ª—É—á—à–µ–Ω–∏—é
- **Performance**: 80-550ms –∞–Ω–∞–ª–∏–∑ —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Rust 1.75+
- Shuttle CLI: `cargo install cargo-shuttle`

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**
```bash
cd bot_fodifood
```

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**
```bash
cp .env.example .env
```

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env`:
```env
OPENAI_API_KEY=sk-your-openai-key
GO_BACKEND_URL=https://your-go-backend.koyeb.app/api
JWT_SECRET=your-jwt-secret
RUST_LOG=info
```

3. **–õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞**
```bash
cargo shuttle run
```

–ë–æ—Ç –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `http://localhost:8000`

4. **–î–µ–ø–ª–æ–π –Ω–∞ Shuttle**
```bash
# –õ–æ–≥–∏–Ω (–µ—Å–ª–∏ –ø–µ—Ä–≤—ã–π —Ä–∞–∑)
cargo shuttle login

# –î–µ–ø–ª–æ–π
cargo shuttle deploy
```

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –≤–∞—à WebSocket –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω:
```
wss://fodifood-bot.shuttleapp.rs/ws
```

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –¥–∏–∞–ª–æ–≥ —Å AI

```bash
# WebSocket —á–∞—Ç (—Å AI insights)
wscat -c wss://your-app.shuttleapp.rs/ws
> {"type":"message","content":"–ü–æ–∫–∞–∂–∏ –º–µ–Ω—é –Ω–∞ —Å–µ–≥–æ–¥–Ω—è","user_id":"user123"}

# AI –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–±—ã—Ç–∏–µ "intent_detected" —á–µ—Ä–µ–∑ /api/v1/insight
# –ó–∞—Ç–µ–º –ø—Ä–∏—Ö–æ–¥–∏—Ç –æ—Ç–≤–µ—Ç —Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏

# REST API
curl -X POST https://your-app.shuttleapp.rs/api/v1/chat \
  -H "Content-Type: application/json" \
  -d '{
    "message": "–•–æ—á—É –∑–∞–∫–∞–∑–∞—Ç—å –ø–∏—Ü—Ü—É –ú–∞—Ä–≥–∞—Ä–∏—Ç–∞",
    "user_id": "user123"
  }'
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ AI —Å–∏—Å—Ç–µ–º—ã (v2.2)

```bash
# Prometheus –º–µ—Ç—Ä–∏–∫–∏
curl http://localhost:8000/api/v1/metrics/prometheus

# –ú–µ—Ç—Ä–∏–∫–∏ –ø–æ –∏–Ω—Ç–µ–Ω—Ç–∞–º
curl http://localhost:8000/api/v1/metrics/intents
{
  "total_intents": 1523,
  "by_type": {
    "menu_query": 456,
    "order_create": 234,
    "recommendation_request": 189
  }
}

# AI Insights WebSocket (real-time events)
wscat -c ws://localhost:8000/api/v1/insight
# –ü–æ–ª—É—á–∞–µ—Ç–µ —Å–æ–±—ã—Ç–∏—è: intent_detected, rule_matched, response_generated
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Backend (v2.2)

```bash
# –ó–∞–ø—É—Å–∫ Go backend
curl -X POST http://localhost:8000/api/v1/admin/backend/start

# –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã
curl http://localhost:8000/api/v1/admin/backend/status
{
  "status": "running",
  "pid": 12345,
  "uptime_secs": 3600,
  "restart_count": 0
}

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
curl -X POST http://localhost:8000/api/v1/admin/backend/restart
```

### –ü—Ä–∏–º–µ—Ä—ã AI Intent Handling

```python
# –ú–µ–Ω—é –∑–∞–ø—Ä–æ—Å
User: "–ß—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å –∏–∑ –¥–µ—Å–µ—Ä—Ç–æ–≤?"
AI: [intent: menu_query, category: desserts]
Response: "üç∞ –£ –Ω–∞—Å –µ—Å—Ç—å —Ç–∏—Ä–∞–º–∏—Å—É, —á–∏–∑–∫–µ–π–∫, –ø–∞–Ω–Ω–∞-–∫–æ—Ç—Ç–∞..."

# –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞
User: "–ó–∞–∫–∞–∂–∏ –º–Ω–µ –∫–∞–ø—É—á–∏–Ω–æ –∏ –∫—Ä—É–∞—Å—Å–∞–Ω"
AI: [intent: order_create, items: ["–∫–∞–ø—É—á–∏–Ω–æ", "–∫—Ä—É–∞—Å—Å–∞–Ω"]]
Response: "‚úÖ –ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–Ω: –ö–∞–ø—É—á–∏–Ω–æ + –ö—Ä—É–∞—Å—Å–∞–Ω (350‚ÇΩ)"

# –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
User: "–ß—Ç–æ –ø–æ—Å–æ–≤–µ—Ç—É–µ—à—å –∫ —Å—Ç–µ–π–∫—É?"
AI: [intent: recommendation_request, context: "—Å—Ç–µ–π–∫"]
Response: "üç∑ –ö —Å—Ç–µ–π–∫—É –æ—Ç–ª–∏—á–Ω–æ –ø–æ–¥–æ–π–¥–µ—Ç –∫—Ä–∞—Å–Ω–æ–µ –≤–∏–Ω–æ Cabernet..."

# –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
User: "–ü–æ–∫–∞–∂–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∑–∞–∫–∞–∑–æ–≤ –∑–∞ –Ω–µ–¥–µ–ª—é"
AI: [intent: analytics_query, period: "week"]
Response: "üìä –ó–∞ –ø–æ—Å–ª–µ–¥–Ω—é—é –Ω–µ–¥–µ–ª—é: 234 –∑–∞–∫–∞–∑–∞, —Å—Ä–µ–¥–Ω–∏–π —á–µ–∫ 850‚ÇΩ..."
```

### üìä Metrics Endpoints (v2.2)

#### GET `/metrics`
Prometheus-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ –º–µ—Ç—Ä–∏–∫–∏

```bash
curl https://fodifood-bot.shuttleapp.rs/metrics
```

#### GET `/admin/metrics`
–í–µ–±-–¥–∞—à–±–æ—Ä–¥ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (HTML)

#### GET `/admin/metrics/intents`
–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ intent'–∞–º (JSON)

```json
{
  "menu": {"count": 150, "avg_time_ms": 45},
  "order": {"count": 89, "avg_time_ms": 120}
}
```

#### GET `/admin/metrics/stats`
–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã

```json
{
  "total_requests": 1024,
  "avg_response_time_ms": 78,
  "success_rate": 0.97
}
```

### ÔøΩ Business Intelligence API (v2.2) **NEW!**

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Go backend –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –±–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫ –∏ AI-—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π.

#### POST `/api/v1/chat` - –ê–Ω–∞–ª–∏–∑ –±–∏–∑–Ω–µ—Å–∞

```bash
# –ê–Ω–∞–ª–∏–∑ –æ–¥–Ω–æ–≥–æ –±–∏–∑–Ω–µ—Å–∞
curl -X POST https://fodifood-bot.shuttleapp.rs/api/v1/chat \
  -H "Content-Type: application/json" \
  -d '{
    "user_id": "investor1",
    "message": "–ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –±–∏–∑–Ω–µ—Å Tech Startup"
  }'

# –û—Ç–≤–µ—Ç
{
  "intent": "AnalyzeBusiness",
  "response": "üè¢ **Tech Startup**\n\nüü¢ TecT - $28.13 (+48.1%) | 2 –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤ | ROI: 235.1%\n\nüí° –ê–Ω–∞–ª–∏–∑:\nüìä –û—Ü–µ–Ω–∫–∞: 90/100 - –û—Ç–ª–∏—á–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏\nüöÄ –¶–µ–Ω–∞ —Ä–∞—Å—Ç—ë—Ç –Ω–∞ 48.1%\nüí∞ –í—ã—Å–æ–∫–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å (ROI 235.1%)\n\nüíé –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –ü–û–ö–£–ü–ê–¢–¨"
}
```

#### POST `/api/v1/chat` - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –±–∏–∑–Ω–µ—Å–æ–≤

```bash
# –°—Ä–∞–≤–Ω–µ–Ω–∏–µ 2+ –±–∏–∑–Ω–µ—Å–æ–≤
curl -X POST https://fodifood-bot.shuttleapp.rs/api/v1/chat \
  -H "Content-Type: application/json" \
  -d '{
    "user_id": "investor1",
    "message": "—Å—Ä–∞–≤–Ω–∏ Tech Startup –∏ Fodi Sushi"
  }'

# –û—Ç–≤–µ—Ç
{
  "intent": "CompareBusinesses",
  "response": "üìä –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑:\n\nüèÜ –õ–∏–¥–µ—Ä—ã:\n‚Ä¢ –†–æ—Å—Ç: Tech Startup (+48.1%)\n‚Ä¢ –ò–Ω–≤–µ—Å—Ç–æ—Ä—ã: Tech Startup (2)\n‚Ä¢ ROI: Tech Startup (235.1%)\n\nüìà –î–µ—Ç–∞–ª–∏:\nTech Startup: 90/100 | $28.13\nFodi Sushi: 20/100 | $15.75"
}
```

#### POST `/api/v1/chat` - AI-—Å–æ–≤–µ—Ç—ã

```bash
# –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
curl -X POST https://fodifood-bot.shuttleapp.rs/api/v1/chat \
  -H "Content-Type: application/json" \
  -d '{
    "user_id": "investor1",
    "message": "–∫–∞–∫ —É–ª—É—á—à–∏—Ç—å Fodi Sushi"
  }'

# –û—Ç–≤–µ—Ç
{
  "intent": "BusinessInsights",
  "response": "üí° **–°–æ–≤–µ—Ç—ã –¥–ª—è: Fodi Sushi**\n\nüéØ –û—Ü–µ–Ω–∫–∞: 20/100\n\nüìâ –ü–∞–¥–µ–Ω–∏–µ —Ü–µ–Ω—ã (-17.1%)\n‚Ä¢ –£–≤–µ–ª–∏—á—å—Ç–µ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥\n‚Ä¢ PR-–∫–∞–º–ø–∞–Ω–∏—è\n\nüë• –ú–∞–ª–æ –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤\n‚Ä¢ –°–Ω–∏–∑—å—Ç–µ –ø–æ—Ä–æ–≥ –≤—Ö–æ–¥–∞\n‚Ä¢ –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞\n\n–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: 1Ô∏è‚É£ –°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è —Ü–µ–Ω—ã"
}
```

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- ‚úÖ **Investment Scoring**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –±–∞–ª–ª 0-100 –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–µ—Ç—Ä–∏–∫
- ‚úÖ **Trend Analysis**: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–æ—Å—Ç–∞ (+10%), —Å—Ç–∞–≥–Ω–∞—Ü–∏–∏ (¬±5%), –ø–∞–¥–µ–Ω–∏—è (-10%)
- ‚úÖ **ROI Calculation**: –†–∞—Å—á—ë—Ç —Ä–µ–Ω—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–ª—è –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤
- ‚úÖ **Multi-comparison**: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ 2-10 –±–∏–∑–Ω–µ—Å–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- ‚úÖ **AI Recommendations**: –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–≤–µ—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–ª–∞–±—ã—Ö –º–µ—Å—Ç
- ‚úÖ **Performance**: 80-550ms response time

**–ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞:**
- –ê–Ω–∞–ª–∏–∑: `"–ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π"`, `"–º–µ—Ç—Ä–∏–∫–∏"`, `"–æ—Ü–µ–Ω–∫–∞"`, `"analyze"`
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ: `"—Å—Ä–∞–≤–Ω–∏"`, `"compare"`, `"vs"`, `"—á—Ç–æ –ª—É—á—à–µ"`
- –°–æ–≤–µ—Ç—ã: `"–∫–∞–∫ —É–ª—É—á—à–∏—Ç—å"`, `"—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏"`, `"insights"`, `"—Å–æ–≤–µ—Ç—ã"`

### ÔøΩüì° AI Insights WebSocket (v2.2)

#### WebSocket: `/api/v1/insight`
Real-time —Å—Ç—Ä–∏–º–∏–Ω–≥ AI —Å–æ–±—ã—Ç–∏–π –æ–±—Ä–∞–±–æ—Ç–∫–∏

```javascript
const ws = new WebSocket('wss://fodifood-bot.shuttleapp.rs/api/v1/insight?client_id=admin_123');

ws.onmessage = (event) => {
  const data = JSON.parse(event.data);
  console.log('AI Event:', data);
  // {type: "intent_classified", intent: "menu", confidence: 0.95, ...}
};
```

**–¢–∏–ø—ã —Å–æ–±—ã—Ç–∏–π:**
- `intent_classification_started` - –ù–∞—á–∞–ª–æ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
- `intent_classified` - Intent –æ–ø—Ä–µ–¥–µ–ª–µ–Ω (—Å confidence)
- `entity_extraction` - –ò–∑–≤–ª–µ—á–µ–Ω—ã —Å—É—â–Ω–æ—Å—Ç–∏
- `handler_routing` - –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∫ handler'—É
- `handler_execution_started` - –ù–∞—á–∞–ª–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- `handler_execution_completed` - –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ
- `context_updated` - –û–±–Ω–æ–≤–ª–µ–Ω –∫–æ–Ω—Ç–µ–∫—Å—Ç
- `processing_completed` - –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞
- `processing_error` - –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏

### üéØ Backend Control Endpoints (v2.2)

#### POST `/api/v1/admin/backend/start`
–ó–∞–ø—É—Å—Ç–∏—Ç—å Go backend –ø—Ä–æ—Ü–µ—Å—Å

```bash
curl -X POST https://fodifood-bot.shuttleapp.rs/api/v1/admin/backend/start
```

#### POST `/api/v1/admin/backend/stop`
–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Go backend –ø—Ä–æ—Ü–µ—Å—Å

#### POST `/api/v1/admin/backend/restart`
–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Go backend

#### GET `/api/v1/admin/backend/status`
–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç—É—Å backend –ø—Ä–æ—Ü–µ—Å—Å–∞

```json
{
  "status": "running",
  "pid": 12345,
  "uptime_secs": 3600,
  "restart_count": 0,
  "last_health_check": "healthy",
  "is_running": true
}
```

#### GET `/api/v1/admin/backend/health`
Health check –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞

```json
{
  "status": "ok",
  "service": "backend_orchestrator",
  "enabled": true
}
```

### Admin & Auth Endpoints

#### GET `/health`
Service health check

#### POST `/api/v1/auth/login`
–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

#### GET `/api/v1/products`
–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤

#### GET `/api/v1/admin/stats`
–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

#### GET `/api/v1/admin/orders`
–°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–∫–∞–∑–æ–≤ (admin only)

#### GET `/api/v1/admin/users`
–°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (admin only)

#### WebSocket: `/api/v1/admin/ws`
Admin WebSocket –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### WebSocket: `/ws`

**–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:**
```javascript
const ws = new WebSocket('wss://fodifood-bot.shuttleapp.rs/ws');
```

**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:**
```json
{
  "type": "auth",
  "token": "eyJhbGciOiJIUzI1NiIs..."
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "type": "auth_success",
  "user_id": "user123",
  "role": "Client"
}
```

**–°–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç:**
```json
{
  "type": "chat",
  "text": "–ü–æ–∫–∞–∂–∏—Ç–µ –º–µ–Ω—é"
}
```

**–ö–æ–º–∞–Ω–¥–∞:**
```json
{
  "type": "command",
  "action": "get_menu",
  "params": null
}
```

**–ö–æ–º–∞–Ω–¥—ã:**
- `get_menu` - –ø–æ–ª—É—á–∏—Ç—å –º–µ–Ω—é
- `get_orders` - –ø–æ–ª—É—á–∏—Ç—å –∑–∞–∫–∞–∑—ã (admin)
- `create_order` - —Å–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑

### HTTP POST: `/notify`

Webhook –¥–ª—è —Å–æ–±—ã—Ç–∏–π –æ—Ç Go backend:

```json
{
  "event": "new_order",
  "order_id": 128,
  "total": 5400,
  "user_id": "user123"
}
```

**–°–æ–±—ã—Ç–∏—è:**
- `new_order` - –Ω–æ–≤—ã–π –∑–∞–∫–∞–∑
- `order_status_changed` - –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
- `low_inventory` - –Ω–∏–∑–∫–∏–µ –æ—Å—Ç–∞—Ç–∫–∏

### HTTP GET: `/health`

–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–∞.

## üß† AI —Ñ—É–Ω–∫—Ü–∏–∏

### –î–µ—Ç–µ–∫—Ü–∏—è –∏–Ω—Ç–µ–Ω—Ç–æ–≤
–ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –Ω–∞–º–µ—Ä–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
- –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
- –ü—Ä–æ—Å–º–æ—Ç—Ä –º–µ–Ω—é
- –ó–∞–ø—Ä–æ—Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å—Ç–∞—Ç–∫–æ–≤ (staff)
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (staff)

### –ü—Ä–∏–º–µ—Ä—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è

**–ö–ª–∏–µ–Ω—Ç:**
```
"–ß—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å –∏–∑ –∫—Ä–µ–≤–µ—Ç–æ–∫?"
‚Üí AI —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–µ–Ω—é –∏–∑ Go backend
```

**–ú–µ–Ω–µ–¥–∂–µ—Ä:**
```
"–ö–∞–∫–∏–µ –±–ª—é–¥–∞ –ø—Ä–æ–¥–∞—é—Ç—Å—è –ª—É—á—à–µ –≤—Å–µ–≥–æ?"
‚Üí AI –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏ –¥–∞–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
```

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ v2.2

```
src/
‚îú‚îÄ‚îÄ main.rs                  # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ Shuttle
‚îú‚îÄ‚îÄ lib.rs                   # Library root
‚îú‚îÄ‚îÄ config.rs                # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ state.rs                 # AppState —Å orchestrator
‚îÇ
‚îú‚îÄ‚îÄ ai/                      # üß† AI Engine v2.2
‚îÇ   ‚îú‚îÄ‚îÄ mod.rs               # AIEngine —Å process_with_insights()
‚îÇ   ‚îú‚îÄ‚îÄ intents.rs           # Intent –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è (17 intents)
‚îÇ   ‚îú‚îÄ‚îÄ intent_handler.rs    # Plugin system –¥–ª—è handlers
‚îÇ   ‚îú‚îÄ‚îÄ thinker.rs           # Cognitive analysis
‚îÇ   ‚îú‚îÄ‚îÄ memory.rs            # In-memory context
‚îÇ   ‚îú‚îÄ‚îÄ persistent_memory.rs # Persistent storage (sled)
‚îÇ   ‚îú‚îÄ‚îÄ analysis.rs          # üíº Business analysis AI (NEW!)
‚îÇ   ‚îú‚îÄ‚îÄ modules/             # üì¶ Intent Handlers (17 total)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ menu.rs          # –ú–µ–Ω—é queries
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ orders.rs        # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ recommendations.rs # –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ analytics.rs     # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ smalltalk.rs     # Small talk
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ news.rs          # –ù–æ–≤–æ—Å—Ç–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ business.rs      # üíº Business intelligence (NEW!)
‚îÇ   ‚îî‚îÄ‚îÄ rules/               # Rule-based responses
‚îÇ       ‚îú‚îÄ‚îÄ menu.rs
‚îÇ       ‚îú‚îÄ‚îÄ orders.rs
‚îÇ       ‚îú‚îÄ‚îÄ recommendations.rs
‚îÇ       ‚îú‚îÄ‚îÄ analytics.rs
‚îÇ       ‚îî‚îÄ‚îÄ smalltalk.rs
‚îÇ
‚îú‚îÄ‚îÄ api/                     # üåê API Layer
‚îÇ   ‚îú‚îÄ‚îÄ rest.rs              # REST endpoints + /api/v1/chat
‚îÇ   ‚îú‚îÄ‚îÄ metrics.rs           # üìä Metrics endpoints
‚îÇ   ‚îú‚îÄ‚îÄ admin_ws.rs          # Admin WebSocket
‚îÇ   ‚îú‚îÄ‚îÄ insight_ws.rs        # üì° AI Insight WebSocket
‚îÇ   ‚îú‚îÄ‚îÄ backend_control.rs   # üéØ Backend control API
‚îÇ   ‚îî‚îÄ‚îÄ go_backend/          # Go backend integration
‚îÇ       ‚îú‚îÄ‚îÄ mod.rs
‚îÇ       ‚îú‚îÄ‚îÄ auth.rs
‚îÇ       ‚îú‚îÄ‚îÄ products.rs
‚îÇ       ‚îú‚îÄ‚îÄ orders.rs
‚îÇ       ‚îú‚îÄ‚îÄ admin.rs
‚îÇ       ‚îî‚îÄ‚îÄ types.rs
‚îÇ
‚îú‚îÄ‚îÄ services/                # üîå External Services (NEW!)
‚îÇ   ‚îú‚îÄ‚îÄ mod.rs
‚îÇ   ‚îî‚îÄ‚îÄ go_client.rs         # üíº Go Backend HTTP Client
‚îÇ                            #    - fetch_businesses()
‚îÇ                            #    - fetch_business_metrics()
‚îÇ                            #    - Business & BusinessMetrics types
‚îÇ
‚îú‚îÄ‚îÄ handlers/                # üîå Protocol Handlers
‚îÇ   ‚îú‚îÄ‚îÄ ws.rs                # WebSocket handler
‚îÇ   ‚îú‚îÄ‚îÄ webhook.rs           # Webhook handler
‚îÇ   ‚îú‚îÄ‚îÄ insight_events.rs    # üì° AI event types
‚îÇ   ‚îî‚îÄ‚îÄ insight_broadcaster.rs # WebSocket broadcaster
‚îÇ
‚îú‚îÄ‚îÄ orchestration/           # üéØ Backend Orchestration (v2.2)
‚îÇ   ‚îú‚îÄ‚îÄ mod.rs
‚îÇ   ‚îú‚îÄ‚îÄ backend.rs           # Process lifecycle management
‚îÇ   ‚îî‚îÄ‚îÄ health.rs            # Health checker
‚îÇ
‚îú‚îÄ‚îÄ metrics/                 # üìä Metrics System (v2.2)
‚îÇ   ‚îî‚îÄ‚îÄ mod.rs               # MetricsCollector
‚îÇ
‚îú‚îÄ‚îÄ models/                  # üìã Data Models
‚îÇ   ‚îú‚îÄ‚îÄ message.rs
‚îÇ   ‚îî‚îÄ‚îÄ user.rs
‚îÇ
‚îî‚îÄ‚îÄ bin/                     # üîß Binaries
    ‚îú‚îÄ‚îÄ chat.rs              # CLI chat client
    ‚îî‚îÄ‚îÄ local.rs             # Local dev server
```

## ÔøΩ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –¥–∏–∞–ª–æ–≥ —Å AI

```bash
# WebSocket —á–∞—Ç (—Å AI insights)
wscat -c wss://your-app.shuttleapp.rs/ws
> {"type":"message","content":"–ü–æ–∫–∞–∂–∏ –º–µ–Ω—é –Ω–∞ —Å–µ–≥–æ–¥–Ω—è","user_id":"user123"}

# AI –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–±—ã—Ç–∏–µ "intent_detected" —á–µ—Ä–µ–∑ /api/v1/insight
# –ó–∞—Ç–µ–º –ø—Ä–∏—Ö–æ–¥–∏—Ç –æ—Ç–≤–µ—Ç —Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏

# REST API
curl -X POST https://your-app.shuttleapp.rs/api/v1/chat \
  -H "Content-Type: application/json" \
  -d '{
    "message": "–•–æ—á—É –∑–∞–∫–∞–∑–∞—Ç—å –ø–∏—Ü—Ü—É –ú–∞—Ä–≥–∞—Ä–∏—Ç–∞",
    "user_id": "user123"
  }'
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ AI —Å–∏—Å—Ç–µ–º—ã (v2.2)

```bash
# Prometheus –º–µ—Ç—Ä–∏–∫–∏
curl http://localhost:8000/api/v1/metrics/prometheus

# –ú–µ—Ç—Ä–∏–∫–∏ –ø–æ –∏–Ω—Ç–µ–Ω—Ç–∞–º
curl http://localhost:8000/api/v1/metrics/intents
{
  "total_intents": 1523,
  "by_type": {
    "menu_query": 456,
    "order_create": 234,
    "recommendation_request": 189
  }
}

# AI Insights WebSocket (real-time events)
wscat -c ws://localhost:8000/api/v1/insight
# –ü–æ–ª—É—á–∞–µ—Ç–µ —Å–æ–±—ã—Ç–∏—è: intent_detected, rule_matched, response_generated
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Backend (v2.2)

```bash
# –ó–∞–ø—É—Å–∫ Go backend
curl -X POST http://localhost:8000/api/v1/admin/backend/start

# –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã
curl http://localhost:8000/api/v1/admin/backend/status
{
  "status": "running",
  "pid": 12345,
  "uptime_secs": 3600,
  "restart_count": 0
}

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
curl -X POST http://localhost:8000/api/v1/admin/backend/restart
```

### –ü—Ä–∏–º–µ—Ä—ã AI Intent Handling

```python
# –ú–µ–Ω—é –∑–∞–ø—Ä–æ—Å
User: "–ß—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å –∏–∑ –¥–µ—Å–µ—Ä—Ç–æ–≤?"
AI: [intent: menu_query, category: desserts]
Response: "üç∞ –£ –Ω–∞—Å –µ—Å—Ç—å —Ç–∏—Ä–∞–º–∏—Å—É, —á–∏–∑–∫–µ–π–∫, –ø–∞–Ω–Ω–∞-–∫–æ—Ç—Ç–∞..."

# –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞
User: "–ó–∞–∫–∞–∂–∏ –º–Ω–µ –∫–∞–ø—É—á–∏–Ω–æ –∏ –∫—Ä—É–∞—Å—Å–∞–Ω"
AI: [intent: order_create, items: ["–∫–∞–ø—É—á–∏–Ω–æ", "–∫—Ä—É–∞—Å—Å–∞–Ω"]]
Response: "‚úÖ –ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–Ω: –ö–∞–ø—É—á–∏–Ω–æ + –ö—Ä—É–∞—Å—Å–∞–Ω (350‚ÇΩ)"

# –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
User: "–ß—Ç–æ –ø–æ—Å–æ–≤–µ—Ç—É–µ—à—å –∫ —Å—Ç–µ–π–∫—É?"
AI: [intent: recommendation_request, context: "—Å—Ç–µ–π–∫"]
Response: "üç∑ –ö —Å—Ç–µ–π–∫—É –æ—Ç–ª–∏—á–Ω–æ –ø–æ–¥–æ–π–¥–µ—Ç –∫—Ä–∞—Å–Ω–æ–µ –≤–∏–Ω–æ Cabernet..."

# –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
User: "–ü–æ–∫–∞–∂–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∑–∞–∫–∞–∑–æ–≤ –∑–∞ –Ω–µ–¥–µ–ª—é"
AI: [intent: analytics_query, period: "week"]
Response: "üìä –ó–∞ –ø–æ—Å–ª–µ–¥–Ω—é—é –Ω–µ–¥–µ–ª—é: 234 –∑–∞–∫–∞–∑–∞, —Å—Ä–µ–¥–Ω–∏–π —á–µ–∫ 850‚ÇΩ..."
```

## üîß –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ (–ø–æ—Ä—Ç 8000)
cargo run --bin local

# –ó–∞–ø—É—Å–∫ —Å –ø–æ–ª–Ω—ã–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
RUST_LOG=debug cargo run --bin local

# Release build
cargo build --release

# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
cargo fmt

# Linting —Å warnings
cargo clippy -- -D warnings
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ v2.2

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ (60+ tests)
cargo test

# –¢–µ—Å—Ç AI Engine —Å insights
cargo test ai::tests --nocapture

# –¢–µ—Å—Ç –º–µ—Ç—Ä–∏–∫ —Å–∏—Å—Ç–µ–º—ã
cargo test metrics::tests

# –¢–µ—Å—Ç Backend Orchestrator
cargo test orchestration::tests --nocapture

# –¢–µ—Å—Ç WebSocket Insights
cargo test handlers::insight --nocapture

# –¢–µ—Å—Ç Business Intelligence (NEW!)
cargo test business --nocapture

# –¢–µ—Å—Ç —Å –≤—ã–≤–æ–¥–æ–º –ª–æ–≥–æ–≤
cargo test -- --nocapture
```

### Debug —É—Ç–∏–ª–∏—Ç—ã

```bash
# CLI —á–∞—Ç –∫–ª–∏–µ–Ω—Ç –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ AI
cargo run --bin chat
> –ü—Ä–∏–≤–µ—Ç, –ø–æ–∫–∞–∂–∏ –º–µ–Ω—é
> –ó–∞–∫–∞–∂–∏ –º–Ω–µ –∫–æ—Ñ–µ

# –¢–µ—Å—Ç –º–µ—Ç—Ä–∏–∫ endpoints
curl http://localhost:8000/api/v1/metrics/dashboard | jq
curl http://localhost:8000/api/v1/metrics/intents | jq

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Insight WebSocket (real-time AI events)
wscat -c ws://localhost:8000/api/v1/insight

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è backend orchestrator
curl http://localhost:8000/api/v1/admin/backend/health | jq

# üíº Business Intelligence —Ç–µ—Å—Ç—ã (NEW!)
# –¢–µ—Å—Ç –∞–Ω–∞–ª–∏–∑–∞ –±–∏–∑–Ω–µ—Å–∞
./test_api.sh

# –î–µ—Ç–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç –≤—Å–µ—Ö 3 –∏–Ω—Ç–µ–Ω—Ç–æ–≤
curl -X POST http://localhost:8000/api/v1/chat \
  -H "Content-Type: application/json" \
  -d '{"user_id":"test","message":"–ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –±–∏–∑–Ω–µ—Å Tech Startup"}' | jq '.'
  
curl -X POST http://localhost:8000/api/v1/chat \
  -H "Content-Type: application/json" \
  -d '{"user_id":"test","message":"—Å—Ä–∞–≤–Ω–∏ Tech Startup –∏ Fodi Sushi"}' | jq '.'

curl -X POST http://localhost:8000/api/v1/chat \
  -H "Content-Type: application/json" \
  -d '{"user_id":"test","message":"–∫–∞–∫ —É–ª—É—á—à–∏—Ç—å Fodi Sushi"}' | jq '.'
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Backend Control API

```bash
# –°—Ç–∞—Ç—É—Å backend (–±–µ–∑ –∑–∞–ø—É—Å–∫–∞ orchestrator)
curl http://localhost:8000/api/v1/admin/backend/status
# Response: {"status":"disabled","message":"Backend orchestration not enabled"}

# –ï—Å–ª–∏ orchestrator –≤–∫–ª—é—á–µ–Ω:
curl -X POST http://localhost:8000/api/v1/admin/backend/start
curl -X POST http://localhost:8000/api/v1/admin/backend/stop
curl -X POST http://localhost:8000/api/v1/admin/backend/restart
```

## üìä Monitoring & Analytics

### –ú–µ—Ç—Ä–∏–∫–∏ —Å–∏—Å—Ç–µ–º—ã (v2.2)

**–î–æ—Å—Ç—É–ø–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏:**
- ‚úÖ **Intent distribution** - —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —Ç–∏–ø–∞–º –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ **Response times** - latency metrics –¥–ª—è AI –æ–±—Ä–∞–±–æ—Ç–∫–∏
- ‚úÖ **Success/failure rates** - –ø—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—à–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
- ‚úÖ **Active connections** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
- ‚úÖ **Backend health status** - —Å–æ—Å—Ç–æ—è–Ω–∏–µ Go backend
- ‚úÖ **Memory usage** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ AI –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º

**Prometheus Integration:**
```bash
# Prometheus scrape endpoint
curl http://localhost:8000/api/v1/metrics/prometheus

# –ü—Ä–∏–º–µ—Ä –º–µ—Ç—Ä–∏–∫:
# ai_intent_total{intent="menu_query"} 456
# ai_response_duration_seconds_bucket{le="0.5"} 234
# websocket_connections_active 12
# backend_health_status 1.0
# ai_memory_size_bytes 1048576
```

### AI Insights Real-time Events

**–°–æ–±—ã—Ç–∏—è —á–µ—Ä–µ–∑ WebSocket `/api/v1/insight`:**

| Event Type | Description | –î–∞–Ω–Ω—ã–µ |
|------------|-------------|--------|
| `intent_detected` | AI –æ–ø—Ä–µ–¥–µ–ª–∏–ª –Ω–∞–º–µ—Ä–µ–Ω–∏–µ | `{intent, confidence}` |
| `rule_matched` | –°—Ä–∞–±–æ—Ç–∞–ª–æ –ø—Ä–∞–≤–∏–ª–æ | `{rule_id, priority}` |
| `context_updated` | –û–±–Ω–æ–≤–ª–µ–Ω –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø–∞–º—è—Ç–∏ | `{memory_size}` |
| `response_generated` | AI —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª –æ—Ç–≤–µ—Ç | `{response_time}` |
| `cognitive_analysis` | –ó–∞–≤–µ—Ä—à–µ–Ω –∞–Ω–∞–ª–∏–∑ Thinker | `{cognitive_state}` |
| `backend_called` | –í—ã–∑–æ–≤ Go backend API | `{endpoint, status}` |
| `metric_recorded` | –ó–∞–ø–∏—Å–∞–Ω–∞ –º–µ—Ç—Ä–∏–∫–∞ | `{metric_type, value}` |
| `processing_started` | –ù–∞—á–∞–ª–æ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ | `{request_id}` |
| `error` | –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ | `{error_message}` |

**–ü—Ä–∏–º–µ—Ä –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:**
```javascript
const ws = new WebSocket('ws://localhost:8000/api/v1/insight');

ws.onmessage = (event) => {
  const insight = JSON.parse(event.data);
  console.log(`[${insight.event_type}]`, insight.data);
  
  if (insight.event_type === 'intent_detected') {
    console.log(`Intent: ${insight.data.intent}, Confidence: ${insight.data.confidence}`);
  }
};
```

## ÔøΩüîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Go Backend

–í –≤–∞—à–µ–º Go backend –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:

### 1. Webhook URL
–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –±–æ—Ç–∞ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤ Go backend:
```
WEBHOOK_URL=https://fodifood-bot.shuttleapp.rs/notify
```

### 2. Endpoint –¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ç–æ–∫–µ–Ω–æ–≤
```go
POST /api/auth/verify
{
  "token": "jwt-token-here"
}

// Response:
{
  "valid": true,
  "user_id": "user123",
  "role": "client"
}
```

### 3. –û—Ç–ø—Ä–∞–≤–∫–∞ webhook —Å–æ–±—ã—Ç–∏–π
```go
type Event struct {
    Event   string      `json:"event"`
    Data    interface{} `json:"data"`
}

func notifyBot(event string, data interface{}) {
    payload := Event{Event: event, Data: data}
    http.Post(webhookURL+"/notify", "application/json", ...)
}

// –ü—Ä–∏–º–µ—Ä—ã:
notifyBot("new_order", map[string]interface{}{
    "order_id": 128,
    "total": 5400,
})

notifyBot("low_inventory", map[string]interface{}{
    "ingredient": "–∫—Ä–µ–≤–µ—Ç–∫–∏",
    "quantity": 2.5,
})
```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- JWT —Ç–æ–∫–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è —á–µ—Ä–µ–∑ Go backend
- WebSocket —Ç—Ä–µ–±—É–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –†–æ–ª–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–π –∫–æ–º–∞–Ω–¥—ã
- CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω (–º–æ–∂–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –≤ production)

## üìä Production –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏ Shuttle
```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ production
cargo shuttle logs

# –õ–æ–≥–∏ —Å —Ñ–∏–ª—å—Ç—Ä–æ–º
cargo shuttle logs --follow

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫
cargo shuttle logs --tail 100
```

### –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `RUST_LOG`:
- `error` - —Ç–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏
- `warn` - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –∏ –æ—à–∏–±–∫–∏
- `info` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- `debug` - –¥–µ—Ç–∞–ª—å–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞ AI engine
- `trace` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è (–≤–∫–ª—é—á–∞—è HTTP –∑–∞–ø—Ä–æ—Å—ã)

**–ü—Ä–∏–º–µ—Ä:**
```bash
# –í Secrets.toml –¥–ª—è Shuttle
RUST_LOG = "info,fodifood_bot=debug"
```

## üß™ Production Testing

### WebSocket —Ç–µ—Å—Ç (—á–µ—Ä–µ–∑ websocat)
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ websocat
cargo install websocat

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ production
websocat wss://fodifood-bot.shuttleapp.rs/ws

# –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
{"type":"auth","token":"your-jwt-token"}
{"type":"chat","text":"–ü–æ–∫–∞–∂–∏—Ç–µ –º–µ–Ω—é"}

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ AI Insights
websocat wss://fodifood-bot.shuttleapp.rs/api/v1/insight
```

### Webhook —Ç–µ—Å—Ç
```bash
# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ webhook endpoint
curl -X POST https://fodifood-bot.shuttleapp.rs/notify \
  -H "Content-Type: application/json" \
  -d '{"event":"new_order","order_id":999,"total":1200}'
```

### Health Check
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ health endpoint
curl https://fodifood-bot.shuttleapp.rs/health

# –ü—Ä–æ–≤–µ—Ä–∫–∞ backend orchestrator
curl https://fodifood-bot.shuttleapp.rs/api/v1/admin/backend/health | jq
```

## üåê –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Next.js

```typescript
// lib/websocket.ts
const WS_URL = 'wss://fodifood-bot.shuttleapp.rs/ws';

class BotClient {
  private ws: WebSocket | null = null;

  connect(token: string) {
    this.ws = new WebSocket(WS_URL);
    
    this.ws.onopen = () => {
      this.send({ type: 'auth', token });
    };

    this.ws.onmessage = (event) => {
      const message = JSON.parse(event.data);
      console.log('Received:', message);
      // Handle message based on type
    };
  }

  send(data: any) {
    if (this.ws?.readyState === WebSocket.OPEN) {
      this.ws.send(JSON.stringify(data));
    }
  }

  sendChat(text: string) {
    this.send({ type: 'chat', text });
  }

  sendCommand(action: string, params?: any) {
    this.send({ type: 'command', action, params });
  }
}

export const botClient = new BotClient();
```

## üìà –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

Shuttle –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ. –î–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:

1. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - –¥–æ–±–∞–≤—å—Ç–µ Redis –¥–ª—è –∫—ç—à–∞ –º–µ–Ω—é/–ø—Ä–æ–¥—É–∫—Ç–æ–≤
2. **Rate limiting** - –æ–≥—Ä–∞–Ω–∏—á—å—Ç–µ —á–∞—Å—Ç–æ—Ç—É –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ AI
3. **Message queue** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—á–µ—Ä–µ–¥—å –¥–ª—è webhook —Å–æ–±—ã—Ç–∏–π

## ü§ù Contributing

1. Fork –ø—Ä–æ–µ–∫—Ç–∞
2. –°–æ–∑–¥–∞–π—Ç–µ feature branch (`git checkout -b feature/amazing-feature`)
3. Commit –∏–∑–º–µ–Ω–µ–Ω–∏–π (`git commit -m 'Add amazing feature'`)
4. Push –≤ branch (`git push origin feature/amazing-feature`)
5. –°–æ–∑–¥–∞–π—Ç–µ Pull Request

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–≤–æ–±–æ–¥–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤ —Å–≤–æ–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö!

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã:
- –ò–∑—É—á–∏—Ç–µ –ª–æ–≥–∏: `cargo shuttle logs`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ Go backend –¥–æ—Å—Ç—É–ø–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å OpenAI API –∫–ª—é—á–∞

## üìù Changelog

### v2.2 (2025-10-16) - Business Intelligence Update üíº

**‚ú® –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- üíº **Business Intelligence Module**: –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∞–Ω–∞–ª–∏–∑–∞ –±–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫
  - `AnalyzeBusiness` intent - –∞–Ω–∞–ª–∏–∑ –º–µ—Ç—Ä–∏–∫ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –±–∏–∑–Ω–µ—Å–∞
  - `CompareBusinesses` intent - —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ 2+ –±–∏–∑–Ω–µ—Å–æ–≤
  - `BusinessInsights` intent - AI-—Å–æ–≤–µ—Ç—ã –ø–æ —É–ª—É—á—à–µ–Ω–∏—é
- üîó **Go Backend Integration**: HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è –±–∏–∑–Ω–µ—Å-–¥–∞–Ω–Ω—ã—Ö
  - `services/go_client.rs` - –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –∫–ª–∏–µ–Ω—Ç —Å —Ç–∏–ø–∞–º–∏
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Neon PostgreSQL —á–µ—Ä–µ–∑ Go API
- üß† **AI Analysis Engine**: 
  - Investment scoring (0-100 –±–∞–ª–ª–æ–≤)
  - Trend analysis (—Ä–æ—Å—Ç/—Å—Ç–∞–≥–Ω–∞—Ü–∏—è/–ø–∞–¥–µ–Ω–∏–µ)
  - ROI calculation
  - Multi-business comparison
  - Prioritized recommendations
- üìà **Performance**: 80-550ms response time –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

**üîß –£–ª—É—á—à–µ–Ω–∏—è:**
- –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –∏–Ω—Ç–µ–Ω—Ç–æ–≤ (17 handlers)
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è –ª—É—á—à–µ–≥–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è
- –î–æ–±–∞–≤–ª–µ–Ω—ã 60+ unit tests
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª–µ–π

**üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã Business Intelligence API
- –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
- –†–∞—Å—à–∏—Ä–µ–Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### v2.1 (Previous) - Backend Orchestration
- üéØ Backend orchestrator —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º
- üìä Prometheus metrics integration
- üì° AI Insights WebSocket layer

### v2.0 - Modular Architecture
- üß† Migr–∞—Ü–∏—è –Ω–∞ intent handlers
- üì¶ 14 —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –º–æ–¥—É–ª–µ–π
- üíæ Persistent memory —Å sled

---

**–°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è FodiFood**
# bot_fodifood
