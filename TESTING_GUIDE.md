# üß™ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é FodiFood Bot

## ‚úÖ –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

–ë–æ—Ç —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!

### –ü—Ä–æ–±–ª–µ–º–∞ –Ω–∞–π–¥–µ–Ω–∞ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞! üéØ

**–ß—Ç–æ –±—ã–ª–æ:**
```json
{"text": "–ø—Ä–∏–≤–µ—Ç"}  ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
```

**–ß—Ç–æ –Ω—É–∂–Ω–æ:**
```json
{"type": "chat", "text": "–ø—Ä–∏–≤–µ—Ç"}  ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
```

## üöÄ –ö–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ HTML —Ç–µ—Å—Ç–µ—Ä

```bash
open test_ws_token.html
```

–ò–ª–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª –≤ –±—Ä–∞—É–∑–µ—Ä–µ –≤—Ä—É—á–Ω—É—é.

### 2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –±–æ—Ç—É

**–í–∞—Ä–∏–∞–Ω—Ç A: –° —Ç–æ–∫–µ–Ω–æ–º (–∞–≤—Ç–æ-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è)**
1. –í—Å—Ç–∞–≤—å—Ç–µ JWT —Ç–æ–∫–µ–Ω –≤ –ø–æ–ª–µ "JWT Token"
2. –ù–∞–∂–º–∏—Ç–µ "üîê –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è —Å —Ç–æ–∫–µ–Ω–æ–º –≤ Query"

**–í–∞—Ä–∏–∞–Ω—Ç B: –ë–µ–∑ —Ç–æ–∫–µ–Ω–∞ (–≥–æ—Å—Ç–µ–≤–æ–π —Ä–µ–∂–∏–º)**
1. –ù–∞–∂–º–∏—Ç–µ "üìù –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –±–µ–∑ —Ç–æ–∫–µ–Ω–∞"
2. –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –¥–µ–º–æ-—Ä–µ–∂–∏–º–µ

### 3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

1. –í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –≤ –ø–æ–ª–µ "–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è"
2. –ù–∞–∂–º–∏—Ç–µ "üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å Chat"
3. –°–º–æ—Ç—Ä–∏—Ç–µ –æ—Ç–≤–µ—Ç –±–æ—Ç–∞ –≤ –ª–æ–≥–µ!

## üìã –ü—Ä–∏–º–µ—Ä—ã —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
```
–ø—Ä–∏–≤–µ—Ç
```
Expected: AI –æ—Ç–≤–µ—Ç —Å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ–º

### –ú–µ–Ω—é
```
–ø–æ–∫–∞–∂–∏ –º–µ–Ω—é
```
Expected: –°–ø–∏—Å–æ–∫ –±–ª—é–¥ –∏–∑ Go backend

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è
```
—á—Ç–æ –ø–æ—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—à—å?
```
Expected: AI —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

### –ó–∞–∫–∞–∑
```
—Ö–æ—á—É –∑–∞–∫–∞–∑–∞—Ç—å –ø–∏—Ü—Ü—É
```
Expected: AI –ø–æ–º–æ—â—å —Å –∑–∞–∫–∞–∑–æ–º

## üîç –õ–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### –í –±—Ä–∞—É–∑–µ—Ä–µ (HTML —Ç–µ—Å—Ç–µ—Ä):
- ‚úÖ –ó–µ–ª–µ–Ω—ã–π = —É—Å–ø–µ—Ö
- ‚ùå –ö—Ä–∞—Å–Ω—ã–π = –æ—à–∏–±–∫–∞  
- üí¨ –°–∏–Ω–∏–π = –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ (Rust –±–æ—Ç):
```
üåê WebSocket connection     - –ù–æ–≤–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
üîë Token prefix             - –¢–æ–∫–µ–Ω –ø–æ–ª—É—á–µ–Ω
‚úÖ Auto-authenticated       - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞
üí¨ Incoming raw text        - –í—Ö–æ–¥—è—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
üéØ Detected intent          - –û–ø—Ä–µ–¥–µ–ª–µ–Ω intent
ü§ñ AI reply                 - –û—Ç–≤–µ—Ç AI —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω
üèÅ Finished processing      - –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞
```

## üéØ –§–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–π

### –ß–∞—Ç (IncomingMessage::Chat)
```json
{
  "type": "chat",
  "text": "–≤–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ"
}
```

### –ö–æ–º–∞–Ω–¥–∞ (IncomingMessage::Command)
```json
{
  "type": "command",
  "action": "get_menu",
  "params": null
}
```

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (IncomingMessage::Auth)
```json
{
  "type": "auth",
  "token": "eyJhbGciOiJIUzI1NiIs..."
}
```

### Ping (IncomingMessage::Ping)
```json
{
  "type": "ping"
}
```

## üîó Endpoints

- **WebSocket**: `ws://127.0.0.1:8000/ws`
- **WebSocket —Å —Ç–æ–∫–µ–Ω–æ–º**: `ws://127.0.0.1:8000/ws?token=YOUR_JWT_TOKEN`
- **Health Check**: `http://127.0.0.1:8000/health`

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞: "missing field `type`"
**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤—å—Ç–µ –ø–æ–ª–µ `"type": "chat"` –≤ JSON

### –û—à–∏–±–∫–∞: "Not authenticated"
**–†–µ—à–µ–Ω–∏–µ**: 
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–∫–µ–Ω –≤ query –ø–∞—Ä–∞–º–µ—Ç—Ä–µ
- –ò–ª–∏ —Ä–∞–±–æ—Ç–∞–π—Ç–µ –≤ –¥–µ–º–æ-—Ä–µ–∂–∏–º–µ (–ø—Ä–æ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ chat —Å–æ–æ–±—â–µ–Ω–∏–µ)

### –û—à–∏–±–∫–∞: "WebSocket –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω"
**–†–µ—à–µ–Ω–∏–µ**: –°–Ω–∞—á–∞–ª–∞ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã AI

–ü–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:

```
üéØ Detected intent: Greeting  <- Intent –æ–ø—Ä–µ–¥–µ–ª–µ–Ω
üîç Default handler: calling AI  <- AI –≤—ã–∑–≤–∞–Ω
ü§ñ AI reply (general): –ü—Ä–∏–≤–µ—Ç!  <- AI –æ—Ç–≤–µ—Ç–∏–ª
üèÅ Finished processing message  <- –ì–æ—Ç–æ–≤–æ
```

## üéâ –£—Å–ø–µ—à–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ï—Å–ª–∏ –≤—ã –≤–∏–¥–∏—Ç–µ:
1. ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ
2. üí¨ –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ
3. ü§ñ –û—Ç–≤–µ—Ç –ø–æ–ª—É—á–µ–Ω
4. –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –≤—Å–µ —ç—Ç–∞–ø—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏

**–ó–Ω–∞—á–∏—Ç –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ! üöÄ**

## üîß –î–∞–ª—å–Ω–µ–π—à–∏–µ —à–∞–≥–∏

1. ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ - –ì–û–¢–û–í–û
2. ‚è≥ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Next.js frontend
3. ‚è≥ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ production Go backend –Ω–∞ Koyeb
4. ‚è≥ –î–µ–ø–ª–æ–π –Ω–∞ Shuttle.rs

---

**–ê–≤—Ç–æ—Ä**: FodiFood Bot Team
**–î–∞—Ç–∞**: 12 –æ–∫—Ç—è–±—Ä—è 2025
