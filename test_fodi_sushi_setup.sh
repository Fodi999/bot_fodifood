#!/bin/bash

# üß™ –°–∫—Ä–∏–ø—Ç –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ—Å—Ç–æ–≤—ã—Ö –º–µ—Ç—Ä–∏–∫ Fodi Sushi –≤ Go backend
# –≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ Go backend

FODI_ID="55d9af69-c4d8-41f4-b587-35cd7ab75105"
GO_BACKEND="http://127.0.0.1:8080/api"

echo "üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è Fodi Sushi..."
curl -s "$GO_BACKEND/businesses" | jq ".[] | select(.id==\"$FODI_ID\")"

echo ""
echo "üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç—Ä–∏–∫ (–æ–∂–∏–¥–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞ 'token not found')..."
curl -s "$GO_BACKEND/metrics/$FODI_ID"

echo ""
echo ""
echo "============================================"
echo "‚ö†Ô∏è  –¢–†–ï–ë–£–ï–¢–°–Ø –í–†–£–ß–ù–£–Æ –í GO BACKEND:"
echo "============================================"
echo ""
echo "–î–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è CompareBusinesses –Ω—É–∂–Ω–æ:"
echo ""
echo "1Ô∏è‚É£  –°–æ–∑–¥–∞—Ç—å —Ç–æ–∫–µ–Ω –¥–ª—è Fodi Sushi:"
echo "   INSERT INTO tokens (id, business_id, symbol, initial_price, total_supply)"
echo "   VALUES (gen_random_uuid(), '$FODI_ID', 'FodiT', 15.75, 150);"
echo ""
echo "2Ô∏è‚É£  –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (–∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏):"
echo "   -- –ü–æ–ª—É—á–∏—Ç—å token_id –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ INSERT"
echo "   INSERT INTO transactions (id, token_id, user_id, type, quantity, price_per_token, total_amount)"
echo "   VALUES"
echo "     (gen_random_uuid(), '<token_id>', '<user_id>', 'BUY', 10, 15.75, 157.5),"
echo "     (gen_random_uuid(), '<token_id>', '<user_id>', 'BUY', 8, 16.20, 129.6),"
echo "     (gen_random_uuid(), '<token_id>', '<user_id>', 'BUY', 5, 17.00, 85.0);"
echo ""
echo "3Ô∏è‚É£  –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏:"
echo "   curl http://127.0.0.1:8080/api/metrics/$FODI_ID | jq '.'"
echo ""
echo "============================================"
echo ""
echo "–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Ç–µ—Å—Ç —Å—Ä–∞–≤–Ω–µ–Ω–∏—è:"
echo "curl -X POST http://127.0.0.1:8000/api/v1/chat \\"
echo "  -H 'Content-Type: application/json' \\"
echo "  -d '{\"user_id\":\"test\",\"message\":\"—Å—Ä–∞–≤–Ω–∏ Tech Startup –∏ Fodi Sushi\"}' | jq '.'"
echo ""
